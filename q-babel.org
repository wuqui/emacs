#+title: Q-Babel

* =tbl-to-df=
#+name: tbl-to-df
#+BEGIN_SRC jupyter-python :kernel qw :session tmp :noweb yes
import pandas as pd

df = pd.DataFrame(
  columns=tbl[1],
  data=tbl[2:]
)
#+END_SRC

* =df-to-tbl=
#+name: df-to-tbl
#+begin_src jupyter-python :kernel qw :session tmp
import IPython
from tabulate import tabulate

class OrgFormatter(IPython.core.formatters.BaseFormatter):
    def __call__(self, obj):
        try:
            return tabulate(obj, headers='keys',
                            tablefmt='orgtbl', showindex='never')
        except:
            return None

ip = get_ipython()
ip.display_formatter.formatters['text/org'] = OrgFormatter()
#+end_src
